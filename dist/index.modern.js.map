{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["import React, { useState } from 'react'\n// import styles from './styles.module.css'\n\nfunction createInputComponent({ multiple, accept }) {\n  const el = document.createElement('input')\n  // set input config\n  el.type = 'file'\n  el.accept = accept\n  el.multiple = multiple\n  // return file input element\n  return el\n}\n\nexport const useFileUpload = () => {\n  const [files, setFiles] = useState(null)\n\n  // Handle onChange event\n  const onChange = (e) => {\n    const parsedFiles = []\n    const target = e.target\n\n    // Loop through files\n    for (const fileIndex in target.files) {\n      // check if index is a number\n      if (isNaN(fileIndex)) {\n        continue\n      }\n\n      // get file object\n      const file = target.files[fileIndex]\n\n      // select properties\n\n      const parsedFile = {\n        url: URL.createObjectURL(file),\n        name: file.name,\n        size: file.size,\n        file // original file object\n      }\n\n      // add to parsed file list\n      parsedFiles.push(parsedFile)\n    }\n\n    // remove event listener after operation\n    target.removeEventListener('change', onChange)\n\n    // remove input element after operation\n    target.remove()\n\n    // update files state hook\n    if (target.multiple) {\n      return setFiles(parsedFiles)\n    }\n    return setFiles(parsedFiles[0])\n  }\n\n  // Handle upload\n  const uploadFile = (\n    { accept, multiple } = { accept: '', multiple: false }\n  ) => {\n    // create virtual input element\n    const inputEL = createInputComponent({ multiple, accept })\n    // add event listener\n    inputEL.addEventListener('change', onChange)\n    inputEL.click()\n  }\n\n  return React.useMemo(() => [files, uploadFile], [files])\n}\n"],"names":["createInputComponent","multiple","accept","el","document","createElement","type","useFileUpload","files","setFiles","useState","onChange","e","parsedFiles","target","fileIndex","isNaN","file","parsedFile","url","URL","createObjectURL","name","size","push","removeEventListener","remove","uploadFile","inputEL","addEventListener","click","React","useMemo"],"mappings":";;AAGA,SAASA,oBAAT,CAA8B;AAAEC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAA9B,EAAoD;AAClD,QAAMC,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAX;AAEAF,EAAAA,EAAE,CAACG,IAAH,GAAU,MAAV;AACAH,EAAAA,EAAE,CAACD,MAAH,GAAYA,MAAZ;AACAC,EAAAA,EAAE,CAACF,QAAH,GAAcA,QAAd;AAEA,SAAOE,EAAP;AACD;;MAEYI,aAAa,GAAG,MAAM;AACjC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBC,QAAQ,CAAC,IAAD,CAAlC;;AAGA,QAAMC,QAAQ,GAAIC,CAAD,IAAO;AACtB,UAAMC,WAAW,GAAG,EAApB;AACA,UAAMC,MAAM,GAAGF,CAAC,CAACE,MAAjB;;AAGA,SAAK,MAAMC,SAAX,IAAwBD,MAAM,CAACN,KAA/B,EAAsC;AAEpC,UAAIQ,KAAK,CAACD,SAAD,CAAT,EAAsB;AACpB;AACD;;AAGD,YAAME,IAAI,GAAGH,MAAM,CAACN,KAAP,CAAaO,SAAb,CAAb;AAIA,YAAMG,UAAU,GAAG;AACjBC,QAAAA,GAAG,EAAEC,GAAG,CAACC,eAAJ,CAAoBJ,IAApB,CADY;AAEjBK,QAAAA,IAAI,EAAEL,IAAI,CAACK,IAFM;AAGjBC,QAAAA,IAAI,EAAEN,IAAI,CAACM,IAHM;AAIjBN,QAAAA;AAJiB,OAAnB;AAQAJ,MAAAA,WAAW,CAACW,IAAZ,CAAiBN,UAAjB;AACD;;AAGDJ,IAAAA,MAAM,CAACW,mBAAP,CAA2B,QAA3B,EAAqCd,QAArC;AAGAG,IAAAA,MAAM,CAACY,MAAP;;AAGA,QAAIZ,MAAM,CAACb,QAAX,EAAqB;AACnB,aAAOQ,QAAQ,CAACI,WAAD,CAAf;AACD;;AACD,WAAOJ,QAAQ,CAACI,WAAW,CAAC,CAAD,CAAZ,CAAf;AACD,GAtCD;;AAyCA,QAAMc,UAAU,GAAG,CACjB;AAAEzB,IAAAA,MAAF;AAAUD,IAAAA;AAAV,MAAuB;AAAEC,IAAAA,MAAM,EAAE,EAAV;AAAcD,IAAAA,QAAQ,EAAE;AAAxB,GADN,KAEd;AAEH,UAAM2B,OAAO,GAAG5B,oBAAoB,CAAC;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAD,CAApC;AAEA0B,IAAAA,OAAO,CAACC,gBAAR,CAAyB,QAAzB,EAAmClB,QAAnC;AACAiB,IAAAA,OAAO,CAACE,KAAR;AACD,GARD;;AAUA,SAAOC,KAAK,CAACC,OAAN,CAAc,MAAM,CAACxB,KAAD,EAAQmB,UAAR,CAApB,EAAyC,CAACnB,KAAD,CAAzC,CAAP;AACD;;;;"}