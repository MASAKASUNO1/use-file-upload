{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["import React, { useState } from 'react'\n// import styles from './styles.module.css'\n\nfunction createInputComponent({ multiple, accept }) {\n  const el = document.createElement('input')\n  // set input config\n  el.type = 'file'\n  el.accept = accept\n  el.multiple = multiple\n  // return file input element\n  return el\n}\n\nexport const useFileUpload = () => {\n  const [files, setFiles] = useState(null)\n  let userCallback = () => {}\n\n  // Handle onChange event\n  const onChange = async (e) => {\n    const parsedFiles = []\n    const target = e.target\n\n    // Loop through files\n    for (const fileIndex in target.files) {\n      // check if index is a number\n      if (isNaN(fileIndex)) {\n        continue\n      }\n\n      // get file object\n      const file = target.files[fileIndex]\n\n      // select properties\n\n      const parsedFile = {\n        source: URL.createObjectURL(file),\n        name: file.name,\n        size: file.size,\n        file // original file object\n      }\n\n      // add to parsed file list\n      parsedFiles.push(parsedFile)\n    }\n\n    // remove event listener after operation\n    target.removeEventListener('change', onChange)\n\n    // remove input element after operation\n    target.remove()\n\n    // update files state hook\n\n    if (target.multiple) {\n      setFiles(parsedFiles)\n      return userCallback(parsedFiles)\n    }\n\n    setFiles(parsedFiles[0])\n    return userCallback(parsedFiles[0])\n\n    // user specified callback\n  }\n\n  // Handle upload\n  const uploadFile = (\n    { accept, multiple } = { accept: '', multiple: false },\n    cb\n  ) => {\n    if (typeof cb === 'function') {\n      userCallback = cb\n    }\n    // create virtual input element\n    const inputEL = createInputComponent({ multiple, accept })\n    // add event listener\n    inputEL.addEventListener('change', onChange)\n    inputEL.click()\n  }\n\n  return React.useMemo(() => [files, uploadFile], [files])\n}\n"],"names":["createInputComponent","multiple","accept","el","document","createElement","type","useFileUpload","files","setFiles","useState","userCallback","onChange","e","parsedFiles","target","fileIndex","isNaN","file","parsedFile","source","URL","createObjectURL","name","size","push","removeEventListener","remove","uploadFile","cb","inputEL","addEventListener","click","React","useMemo"],"mappings":";;AAGA,SAASA,oBAAT,CAA8B;AAAEC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAA9B,EAAoD;AAClD,QAAMC,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAX;AAEAF,EAAAA,EAAE,CAACG,IAAH,GAAU,MAAV;AACAH,EAAAA,EAAE,CAACD,MAAH,GAAYA,MAAZ;AACAC,EAAAA,EAAE,CAACF,QAAH,GAAcA,QAAd;AAEA,SAAOE,EAAP;AACD;;MAEYI,aAAa,GAAG,MAAM;AACjC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBC,QAAQ,CAAC,IAAD,CAAlC;;AACA,MAAIC,YAAY,GAAG,MAAM,EAAzB;;AAGA,QAAMC,QAAQ,GAAG,MAAOC,CAAP,IAAa;AAC5B,UAAMC,WAAW,GAAG,EAApB;AACA,UAAMC,MAAM,GAAGF,CAAC,CAACE,MAAjB;;AAGA,SAAK,MAAMC,SAAX,IAAwBD,MAAM,CAACP,KAA/B,EAAsC;AAEpC,UAAIS,KAAK,CAACD,SAAD,CAAT,EAAsB;AACpB;AACD;;AAGD,YAAME,IAAI,GAAGH,MAAM,CAACP,KAAP,CAAaQ,SAAb,CAAb;AAIA,YAAMG,UAAU,GAAG;AACjBC,QAAAA,MAAM,EAAEC,GAAG,CAACC,eAAJ,CAAoBJ,IAApB,CADS;AAEjBK,QAAAA,IAAI,EAAEL,IAAI,CAACK,IAFM;AAGjBC,QAAAA,IAAI,EAAEN,IAAI,CAACM,IAHM;AAIjBN,QAAAA;AAJiB,OAAnB;AAQAJ,MAAAA,WAAW,CAACW,IAAZ,CAAiBN,UAAjB;AACD;;AAGDJ,IAAAA,MAAM,CAACW,mBAAP,CAA2B,QAA3B,EAAqCd,QAArC;AAGAG,IAAAA,MAAM,CAACY,MAAP;;AAIA,QAAIZ,MAAM,CAACd,QAAX,EAAqB;AACnBQ,MAAAA,QAAQ,CAACK,WAAD,CAAR;AACA,aAAOH,YAAY,CAACG,WAAD,CAAnB;AACD;;AAEDL,IAAAA,QAAQ,CAACK,WAAW,CAAC,CAAD,CAAZ,CAAR;AACA,WAAOH,YAAY,CAACG,WAAW,CAAC,CAAD,CAAZ,CAAnB;AAGD,GA5CD;;AA+CA,QAAMc,UAAU,GAAG,CACjB;AAAE1B,IAAAA,MAAF;AAAUD,IAAAA;AAAV,MAAuB;AAAEC,IAAAA,MAAM,EAAE,EAAV;AAAcD,IAAAA,QAAQ,EAAE;AAAxB,GADN,EAEjB4B,EAFiB,KAGd;AACH,QAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B;AAC5BlB,MAAAA,YAAY,GAAGkB,EAAf;AACD;;AAED,UAAMC,OAAO,GAAG9B,oBAAoB,CAAC;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAD,CAApC;AAEA4B,IAAAA,OAAO,CAACC,gBAAR,CAAyB,QAAzB,EAAmCnB,QAAnC;AACAkB,IAAAA,OAAO,CAACE,KAAR;AACD,GAZD;;AAcA,SAAOC,KAAK,CAACC,OAAN,CAAc,MAAM,CAAC1B,KAAD,EAAQoB,UAAR,CAApB,EAAyC,CAACpB,KAAD,CAAzC,CAAP;AACD;;;;"}